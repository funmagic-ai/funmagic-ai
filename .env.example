# ====================================
# Database
# ====================================
DATABASE_URL=postgres://user:password@localhost:5432/dbname

# ====================================
# Redis
# ====================================
REDIS_URL=redis://localhost:6379

# ====================================
# MinIO (S3-compatible storage)
# ====================================
S3_ENDPOINT=http://localhost:9000
S3_REGION=us-east-2
S3_ACCESS_KEY=your-access-key
S3_SECRET_KEY=your-secret-key

# Bucket configuration
# - funmagic-public: Public assets (direct URL access, no auth)
# - funmagic-private: User private assets (presigned URLs)
# - funmagic-admin: Admin-only assets (presigned URLs)
S3_BUCKET_PUBLIC=funmagic-public
S3_BUCKET_PRIVATE=funmagic-private
S3_BUCKET_ADMIN=funmagic-admin

# ====================================
# CDN (optional - for production)
# ====================================
# CDN_BASE_URL=https://cdn.example.com
# PRIVATE_CDN_BASE_URL=https://private-cdn.example.com
# CLOUDFRONT_KEY_PAIR_ID=your-key-pair-id
# CLOUDFRONT_PRIVATE_KEY=your-private-key

# ====================================
# Cloudflare R2 (optional - for production)
# ====================================
# CLOUDFLARE_ACCOUNT_ID=your-account-id
# CLOUDFLARE_R2_ACCESS_KEY_ID=your-access-key
# CLOUDFLARE_R2_SECRET_ACCESS_KEY=your-secret-key
# CLOUDFLARE_R2_BUCKET_NAME=funmagic-uploads

# ====================================
# Backend
# ====================================
PORT=8000

# ====================================
# Security
# ====================================
# Used for credential encryption (AES-256-GCM)
# Generate with: openssl rand -base64 32
SECRET_KEY=generate-with-openssl-rand-base64-32

# ====================================
# Authentication (better-auth)
# ====================================
# Generate with: openssl rand -base64 32
BETTER_AUTH_SECRET=generate-with-openssl-rand-base64-32
BETTER_AUTH_URL=http://localhost:8000

# ====================================
# CORS & Auth Origins
# ====================================
# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:3000,http://localhost:3001
TRUSTED_ORIGINS=http://localhost:3000,http://localhost:3001

# ====================================
# Frontend
# ====================================
VITE_API_URL=http://localhost:8000

# ====================================
# Timeouts (milliseconds)
# ====================================
# Health check timeout for provider health checks
HEALTH_CHECK_TIMEOUT_MS=10000
# Backoff delay for failed job retries
JOB_BACKOFF_DELAY_MS=1000
# Max time a web tool worker (figme, bg-remove, etc.) can run before timeout
TOOL_TIMEOUT_MS=300000
# Max time a studio provider (OpenAI, Google, Fal) API call can run before timeout
PROVIDER_TIMEOUT_MS=300000
# Max duration for SSE streaming connections before auto-close
SSE_MAX_DURATION_MS=600000

# ====================================
# S3 URL Expirations (seconds)
# ====================================
# Presigned URL expiration for private/admin assets
PRESIGNED_URL_EXPIRATION_PRIVATE=900
# Presigned URL expiration for upload operations
PRESIGNED_URL_EXPIRATION_UPLOAD=3600

# ====================================
# Upload Limits
# ====================================
# Allowed upload MIME types (comma-separated)
ALLOWED_UPLOAD_TYPES=image/jpeg,image/png,image/webp,image/gif,image/svg+xml,application/json,text/plain
# Max size for image uploads (20 MB)
MAX_IMAGE_UPLOAD_SIZE=20971520
# Max size for non-image uploads (50 MB)
MAX_FILE_UPLOAD_SIZE=52428800
# Max number of style images per tool
MAX_STYLE_IMAGES=8

# ====================================
# AWS Deployment (Production)
# ====================================
# AWS Region
# AWS_REGION=us-east-2

# S3 Endpoint (use default AWS S3 in production)
# S3_ENDPOINT=https://s3.us-east-2.amazonaws.com

# CDN Configuration
# CDN_BASE_URL=https://cdn.funmagic.ai

# CloudFront Signed URLs (for private content)
# CLOUDFRONT_KEY_PAIR_ID=your-key-pair-id
# CLOUDFRONT_PRIVATE_KEY=your-private-key-base64

# App Runner URLs
# VITE_API_URL=https://api.funmagic.ai
# BETTER_AUTH_URL=https://api.funmagic.ai

# CORS Origins (production)
# CORS_ORIGINS=https://funmagic.ai,https://admin.funmagic.ai
# TRUSTED_ORIGINS=https://funmagic.ai,https://admin.funmagic.ai

# ====================================
# OAuth Social Login
# ====================================
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
FACEBOOK_CLIENT_ID=
FACEBOOK_CLIENT_SECRET=
# Apple Sign In only works with HTTPS (not localhost)
APPLE_CLIENT_ID=
APPLE_CLIENT_SECRET=

# ====================================
# Observability & Metrics
# ====================================
# Optional bearer token to protect /metrics endpoints
METRICS_AUTH_TOKEN=

# Worker concurrency (number of jobs processed in parallel)
WORKER_CONCURRENCY=5
STUDIO_WORKER_CONCURRENCY=3

# Worker metrics HTTP server ports
WORKER_METRICS_PORT=9090
STUDIO_WORKER_METRICS_PORT=9091

# Logging level (trace, debug, info, warn, error, fatal)
LOG_LEVEL=info

# ====================================
# Grafana Cloud (used by Alloy, not by app code)
# ====================================
GRAFANA_LOKI_URL=
GRAFANA_LOKI_USERNAME=
GRAFANA_LOKI_API_KEY=
GRAFANA_PROMETHEUS_URL=
GRAFANA_PROMETHEUS_USERNAME=
GRAFANA_PROMETHEUS_API_KEY=
